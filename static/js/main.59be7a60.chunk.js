(this["webpackJsonpbj-test"]=this["webpackJsonpbj-test"]||[]).push([[0],{168:function(e,t,a){"use strict";a.r(t);var c=a(23),n=a.n(c),s=a(1),r=a(14),i=a(6),l=a(13),j=a.n(l),o=(a(65),a(4)),d="GET_TASKS",b="SET_LOADING",u="CREATE_TASK",O="LOG_IN",m="SHOW_ALERT",h="HIDE_ALERT",p="LOG_OUT",x="GET_TASK_COUNT",f="SET_PAGE",v="EDIT_TASK",_="SET_SEARCH_FIELD",g="SET_SEARCH_ORDER",y=a(57),N=a.n(y).a.create({baseURL:"https://uxcandy.com/~shapoval/test-task-backend/v2"}),k=function(e){return{type:b,payload:e}},E=function(e){return function(t){t({type:m,payload:e}),setTimeout((function(){return t({type:h})}),2e3)}};function S(e){var t=e.toLowerCase();return e[0].toUpperCase()+t.slice(1)}var T=a(0),w=function(e){for(var t=e.totalTasks,a=e.currentPage,c=Object(o.b)(),n=[],s=1;s<=Math.ceil(t/3);s++)n.push(s);var r=function(e){return e===a?"grey":"white"};return Object(T.jsx)("div",{children:Object(T.jsx)("ul",{className:"pagination-box",children:n.map((function(e){return Object(T.jsx)("li",{className:"pagination__item",style:{background:"".concat(r(e))},onClick:function(){return c({type:f,payload:e})},children:e},e)}))})})},L=function(){var e=Object(o.b)();return Object(T.jsx)("div",{className:"searchBar",children:Object(T.jsxs)("form",{onSubmit:function(t){t.preventDefault();var a,c=document.querySelector("#field"),n=document.querySelector("#order");e((a=c.value,{type:_,payload:a})),e(function(e){return{type:g,payload:e}}(n.value))},children:[Object(T.jsx)("label",{htmlFor:"field",children:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e \u043f\u043e\u043b\u044e:"}),Object(T.jsxs)("select",{name:"field",id:"field",className:"searchBar__item",children:[Object(T.jsx)("option",{value:"id",children:"--\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435--"}),Object(T.jsx)("option",{value:"username",children:"\u0418\u043c\u044f"}),Object(T.jsx)("option",{value:"email",children:"\u0415-\u043f\u043e\u0447\u0442\u0430"}),Object(T.jsx)("option",{value:"status",children:"\u0421\u0442\u0430\u0442\u0443\u0441"})]}),Object(T.jsxs)("select",{name:"order",id:"order",className:"searchBar__item",children:[Object(T.jsx)("option",{value:"desc",children:"\u041f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e"}),Object(T.jsx)("option",{value:"asc",children:"\u041f\u043e \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e"})]}),Object(T.jsx)("button",{type:"submit",className:"button searchBar__button button-green",children:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})})},D=function(){var e=Object(o.c)((function(e){return e.auth.auth})),t=Object(o.b)(),a=Object(o.c)((function(e){return e.tasks.tasks})),c=Object(o.c)((function(e){return e.tasks.totalTasks})),n=Object(o.c)((function(e){return e.currentPage})),i=Object(o.c)((function(e){return e.search.field})),l=Object(o.c)((function(e){return e.search.order})),j=Object(o.c)((function(e){return e.tasks.loading}));return Object(s.useEffect)((function(){t(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;return function(c){c(k(!0)),N.get("/",{params:{developer:"Enver",page:e,sort_direction:t,sort_field:a}}).then((function(e){c({type:d,payload:e.data.message.tasks}),c({type:x,payload:e.data.message.total_task_count})}))}}(n,l,i))}),[n,i,l,t]),j?Object(T.jsx)("div",{className:"rightSide rightSide--bg-grey",children:Object(T.jsxs)("div",{className:"lds-default",children:[Object(T.jsx)("div",{}),Object(T.jsx)("div",{}),Object(T.jsx)("div",{}),Object(T.jsx)("div",{}),Object(T.jsx)("div",{}),Object(T.jsx)("div",{}),Object(T.jsx)("div",{}),Object(T.jsx)("div",{}),Object(T.jsx)("div",{}),Object(T.jsx)("div",{}),Object(T.jsx)("div",{}),Object(T.jsx)("div",{})]})}):0===a.length?Object(T.jsx)("div",{className:"taskList-empty rightSide",children:Object(T.jsx)("h1",{children:"\u041f\u043e\u043a\u0430 \u0437\u0430\u0434\u0430\u043d\u0438\u0439 \u043d\u0435\u0442!"})}):Object(T.jsxs)("div",{className:"taskList rightSide",children:[Object(T.jsx)("h1",{className:"taskList__title",children:"\u0412\u0441\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u044f"}),Object(T.jsx)(L,{}),a.map((function(t){return Object(T.jsxs)("div",{className:"task taskList__item",children:[Object(T.jsxs)("p",{className:"task__item ",children:[Object(T.jsx)("strong",{children:"\u0418\u043c\u044f:"})," ",S(t.username)]}),Object(T.jsxs)("p",{className:"task__item",children:[Object(T.jsx)("strong",{children:"E-\u043f\u043e\u0447\u0442\u0430:"})," ",S(t.email)]}),Object(T.jsxs)("p",{className:"task__item",children:[Object(T.jsx)("strong",{children:"\u0417\u0430\u0434\u0430\u0447\u0430: "}),S(t.text)]}),Object(T.jsxs)("p",{className:"task__item",children:[Object(T.jsx)("strong",{children:"\u0421\u0442\u0430\u0442\u0443\u0441: "}),(a=t.status,{0:"\u0437\u0430\u0434\u0430\u0447\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430",1:"\u0437\u0430\u0434\u0430\u0447\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430, \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0430 \u0430\u0434\u043c\u0438\u043d\u043e\u043c",10:"\u0437\u0430\u0434\u0430\u0447\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430",11:"\u0437\u0430\u0434\u0430\u0447\u0430 \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0430 \u0430\u0434\u043c\u0438\u043d\u043e\u043c \u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430"}[a])]}),e&&Object(T.jsx)(r.b,{to:"/edit/".concat(t.id),children:Object(T.jsx)("div",{className:"task__button-center",children:Object(T.jsx)("button",{className:"button button-blue",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})})})]},t.id);var a})),Object(T.jsx)(w,{totalTasks:c,currentPage:n})]})},C=a.p+"static/media/tasks.b3bc6ae0.svg",A=a.p+"static/media/edit.b066419a.svg",R=a.p+"static/media/login.60a81c8d.svg",q=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.auth.auth}));return Object(T.jsxs)("nav",{className:"nav",children:[Object(T.jsx)(r.b,{to:"/",children:Object(T.jsxs)("div",{className:"nav__item",children:[Object(T.jsx)("img",{src:C,width:"50",alt:"Task"}),Object(T.jsx)("p",{children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})]})}),Object(T.jsx)(r.b,{to:"/create",children:Object(T.jsxs)("div",{className:"nav__item",children:[Object(T.jsx)("img",{src:A,width:"50",alt:"Create"}),Object(T.jsx)("p",{children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443"})]})}),t?Object(T.jsx)(r.b,{to:"/",onClick:function(){j.a.remove("admin"),j.a.remove("token"),e({type:p})},children:Object(T.jsxs)("div",{className:"nav__item",children:[Object(T.jsx)("img",{src:R,width:"50",alt:"Login"}),Object(T.jsx)("p",{children:"\u0412\u044b\u0445\u043e\u0434"})]})}):Object(T.jsx)(r.b,{to:"/login",children:Object(T.jsxs)("div",{className:"nav__item",children:[Object(T.jsx)("img",{src:R,width:"50",alt:"Login"}),Object(T.jsx)("p",{children:"\u0412\u0445\u043e\u0434"})]})})]})},F=a(3),I=a(26),G=function(e){var t=Object(s.useState)(e),a=Object(I.a)(t,2),c=a[0],n=a[1];return{bind:{value:c,onChange:function(e){n(e.target.value)}},value:c,clear:function(){n(e)}}},P=function(e){var t=e.match,a=Object(i.g)(),c=Object(o.b)(),n=t.params.id,r=Object(o.c)((function(e){return e.tasks.tasks})),l=j.a.get("token"),d=r.find((function(e){return e.id===Number(n)})),b=G(d.text),u=Object(s.useRef)(d.text),O=Object(s.useRef)(),m=Object(s.useState)(d.status),h=Object(I.a)(m,2),p=h[0],x=h[1],f=function(e){e.target.checked&&x(Number(e.target.value))};return Object(T.jsx)("div",{className:"rightSide",children:Object(T.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault();var t,s=!(u.current===b.value);t=s&&10===p?11:s&&0===p?1:p,c(function(e,t,a,c){return j.a.get("admin")?function(n){var s=new FormData;s.append("status",c),s.append("text",a),s.append("token",t),N.post("/edit/".concat(e),s,{params:{developer:"Enver"}}).then((function(e){n({type:v})}))}:(window.location.href="/",E("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0438\u0440\u0443\u0439\u0442\u0435\u0441\u044c!"))}(n,l,b.value,t)),a.push("/")},children:[Object(T.jsx)("h1",{className:"form__title",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),Object(T.jsxs)("div",{className:"editform",children:[Object(T.jsxs)("p",{className:"editform__item",children:[Object(T.jsx)("strong",{children:"\u0418\u043c\u044f: "}),d.username]}),Object(T.jsxs)("p",{className:"editform__item",children:[Object(T.jsx)("strong",{children:"E-\u041f\u043e\u0447\u0442\u0430: "}),d.email]}),Object(T.jsx)("p",{children:Object(T.jsx)("strong",{children:"\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u0441\u0442\u0430\u0442\u0443\u0441: "})}),Object(T.jsxs)("div",{className:"editform__item_indented",children:[Object(T.jsx)("input",{type:"radio",id:"finished",name:"task",value:"10",checked:p>1,onChange:f}),Object(T.jsx)("label",{htmlFor:"finished",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e"})]}),Object(T.jsxs)("div",{className:"editform__item_indented",children:[Object(T.jsx)("input",{ref:O,type:"radio",id:"pending",name:"task",value:"0",checked:p<10,onChange:f}),Object(T.jsx)("label",{htmlFor:"pending",children:"\u041d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e"})]}),Object(T.jsxs)("div",{className:"editform__item",children:[Object(T.jsx)("label",{htmlFor:"text",children:Object(T.jsx)("strong",{children:"Te\u043a\u0441\u0442"})}),Object(T.jsx)("textarea",Object(F.a)(Object(F.a)({type:"text",className:"form__item"},b.bind),{},{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0422\u0415\u041a\u0421\u0422 \u0437\u0430\u0434\u0430\u0447\u0438",id:"text",required:!0}))]}),Object(T.jsx)("button",{className:"button button-green",type:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})})},U=a(33),B=a.n(U),H=a(27),K=function(){var e=G(""),t=G(""),a=G(""),c=Object(o.b)(),n=Object(i.g)();function r(e){B.a.isEmail(e)||c(E("E-mail \u043d\u0435 \u0432\u0430\u043b\u0438\u0434\u0435\u043d!"))}function l(){r(this.value)}return r=function(e,t){var a;return function(){var c=arguments,n=this,s=function(){e.apply(n,c)};clearTimeout(a),a=setTimeout(s,t)}}(r,1e3),Object(s.useEffect)((function(){var e=document.querySelector("#email");return e.addEventListener("keyup",l),function(){e.removeEventListener("keyup",l)}})),Object(T.jsx)("div",{className:"rightSide",children:Object(T.jsxs)("form",{className:"form",onSubmit:function(s){if(s.preventDefault(),!B.a.isEmail(t.value))return c(E("E-mail \u043d\u0435 \u0432\u0430\u043b\u0438\u0434\u0435\u043d!"));c(function(e,t,a){var c=new FormData;return c.append("username",e),c.append("email",t),c.append("text",a),function(e){N.post("/create",c,{params:{developer:"Enver"}}).then((function(t){"ok"===t.data.status?(e({type:u,payload:t.data.message}),e(E("\u0417\u0430\u0434\u0430\u0447\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430"))):e(E("NO"))}))}}(Object(H.sanitize)(e.value),Object(H.sanitize)(t.value),Object(H.sanitize)(a.value))),e.clear(),t.clear(),a.clear(),n.push("/")},children:[Object(T.jsx)("h1",{className:"form__title",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0437\u0430\u0434\u0430\u043d\u0438\u0435"}),Object(T.jsx)("input",Object(F.a)(Object(F.a)({className:"form__item",type:"text"},e.bind),{},{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0418\u041c\u042f",required:!0})),Object(T.jsx)("br",{}),Object(T.jsx)("input",Object(F.a)(Object(F.a)({type:"text",className:"form__item"},t.bind),{},{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 E-MAIL \u0430\u0434\u0440\u0435\u0441",id:"email",required:!0})),Object(T.jsx)("br",{}),Object(T.jsx)("textarea",Object(F.a)(Object(F.a)({type:"text",className:"form__item form__textarea"},a.bind),{},{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0422\u0415\u041a\u0421\u0422 \u0437\u0430\u0434\u0430\u0447\u0438",required:!0})),Object(T.jsx)("br",{}),Object(T.jsx)("button",{className:"button button-green",type:"submit",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})]})})},z=function(){var e=Object(o.b)(),t=G(""),a=G("");return Object(T.jsx)("div",{className:"rightSide loginform",children:Object(T.jsxs)("form",{className:"form",onSubmit:function(c){c.preventDefault(),e(function(e,t){var a=new FormData;return a.append("username",e),a.append("password",t),function(e){N.post("/login",a,{params:{developer:"Enver"}}).then((function(t){if("error"===t.data.status)return e(E(t.data.message.password));e({type:O,payload:t.data.message.token}),j.a.set("admin",!0,{expires:1}),j.a.set("token",t.data.message.token,{expires:1}),window.location.href="/"}))}}(t.value,a.value))},children:[Object(T.jsx)("h1",{className:"form__title",children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(T.jsx)("input",Object(F.a)(Object(F.a)({type:"text",className:"form__item",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448e \u0438\u043c\u044f"},t.bind),{},{required:!0})),Object(T.jsx)("input",Object(F.a)(Object(F.a)({type:"password",className:"form__item",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 \u043f\u0430\u0440\u043e\u043b\u044c"},a.bind),{},{required:!0})),Object(T.jsx)("button",{className:"button loginform__button button-green",type:"submit",children:"\u0412\u043e\u0439\u0442\u0438"})]})})},M=function(){var e=Object(o.c)((function(e){return e.alert}));return Object(T.jsx)("div",{className:"alert ml-100",children:Object(T.jsx)("p",{children:e})})},J=function(){var e=Object(o.c)((function(e){return e.alert})),t=Object(o.b)();return Object(s.useEffect)((function(){!function(){var e=j.a.get("token");e&&t({type:O,payload:e})}()})),Object(T.jsx)("div",{className:"app",children:Object(T.jsxs)(r.a,{children:[e?Object(T.jsx)(M,{}):null,Object(T.jsx)(q,{}),Object(T.jsxs)(i.d,{children:[Object(T.jsx)(i.b,{path:"/",exact:!0,component:D}),Object(T.jsx)(i.b,{path:"/edit/:id",exact:!0,component:P}),Object(T.jsx)(i.b,{path:"/create",exact:!0,component:K}),Object(T.jsx)(i.b,{path:"/login",exact:!0,component:z}),Object(T.jsx)(i.b,{path:"*",children:Object(T.jsx)(i.a,{to:"/"})})]})]})})},X=a(16),V=a(60),W={tasks:[],totalTasks:0,loading:!1},Q={auth:!1,token:null},Y={field:"id",order:"desc"},Z=Object(X.b)({tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(F.a)(Object(F.a)({},e),{},{tasks:t.payload,loading:!1});case u:return Object(F.a)(Object(F.a)({},e),{},{tasks:[t.payload].concat(Object(V.a)(e.tasks.slice(0,2)))});case x:return Object(F.a)(Object(F.a)({},e),{},{totalTasks:t.payload});default:return e;case b:return Object(F.a)(Object(F.a)({},e),{},{loading:t.payload})}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(F.a)(Object(F.a)({},e),{},{auth:!0,token:t.payload});case p:return Object(F.a)(Object(F.a)({},e),{},{auth:!1,token:null});default:return e}},alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return t.payload;case h:return null;default:return e}},currentPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;return t.type===f?t.payload:e},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(F.a)(Object(F.a)({},e),{},{field:t.payload});case g:return Object(F.a)(Object(F.a)({},e),{},{order:t.payload});default:return e}}}),$=a(59),ee=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||X.c,te=Object(X.d)(Z,ee(Object(X.a)($.a)));n.a.render(Object(T.jsx)(o.a,{store:te,children:Object(T.jsx)(J,{})}),document.querySelector("#root"))},65:function(e,t,a){}},[[168,1,2]]]);
//# sourceMappingURL=main.59be7a60.chunk.js.map